"use strict";(self.webpackChunke_commerce_website=self.webpackChunke_commerce_website||[]).push([[510],{4886:function(e,t,a){var l=a(5949),n=a(5893);t.Z=(0,l.Z)((0,n.jsx)("path",{d:"M22.73 22.73 2.77 2.77 2 2l-.73-.73L0 2.54l4.39 4.39 2.21 4.66-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h7.46l1.38 1.38c-.5.36-.83.95-.83 1.62 0 1.1.89 2 1.99 2 .67 0 1.26-.33 1.62-.84L21.46 24l1.27-1.27zM7.42 15c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h2.36l2 2H7.42zm8.13-2c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H6.54l9.01 9zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2z"}),"RemoveShoppingCart")},1916:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var l=a(5949),n=a(5893),r=(0,l.Z)((0,n.jsx)("path",{d:"M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"ExitToApp"),i=a(422),o=a(4886),c=a(8587),s=a(8396),d=a(2734),m=a(1508),p=a(2658),x=a(8973),y=a(8990),u=a(1079),h=a(7294),g=a(5007),f=a(1056),E=a(4563),b=a(7577),Z=a(3577),v=a(8212),w=a(2428);var S=e=>{let{type:t,data:a,currency:l,setStage:n,handleSelect:r}=e;const i=(0,d.Z)();return h.createElement(m.Z,{width:"min(400px, 100%)",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},h.createElement(p.Z,{fontWeight:"bold"},"Select your ",t," ","payment"===t?"method":"delivery"===t?"address":""),h.createElement(m.Z,{height:"100%",width:"100%",sx:{overflowY:"scroll","&::-webkit-scrollbar":{bgcolor:"transparent",width:"10px"},"&::-webkit-scrollbar-thumb":{borderRadius:"25px",bgcolor:i.palette.grey[300]},"&::-webkit-scrollbar-thumb:hover":{cursor:"pointer",bgcolor:i.palette.grey[400]}}},h.createElement(m.Z,{display:"flex",flexDirection:"column",padding:"0px 10px",gap:"20px"},a.map((e=>h.createElement("button",{onClick:()=>r(e),style:{width:"100%",backgroundColor:"transparent",border:"none",padding:"0px",textAlign:"start"}},h.createElement(m.Z,{width:"100%",display:"flex",alignItems:"center",padding:"20px",gap:"10px",boxShadow:`0px 0px 10px 0px ${i.palette.grey[300]}`,borderRadius:"20px",sx:{transition:"0.3s",":hover":{cursor:"pointer",boxShadow:`0px 0px 10px 0px ${i.palette.grey[400]}`,color:"primary.main"}}},"payment"===t?h.createElement(Z.Z,{color:"text.secondary"}):h.createElement(v.Z,{color:"text.secondary"}),h.createElement(m.Z,{width:"100%",display:"flex",flexDirection:"column",gap:"5px"},h.createElement(m.Z,{display:"flex",gap:"5px",width:"100%",justifyContent:"space-between"},h.createElement(p.Z,{fontWeight:"bold"},"payment"===t?e.type:"delivery"===t?`${e.name}`:""),"delivery"===t?h.createElement(p.Z,{fontSize:"0.9rem",color:"primary.main"},l.symbol," ",e.location.deliveryFee.amount):h.createElement(m.Z,null)),h.createElement(p.Z,{color:"text.secondary"},"payment"===t?e.number:"delivery"===t?`${e.country}, ${e.city}`:"")))))),h.createElement("button",{onClick:()=>n(1),style:{width:"100%",backgroundColor:"transparent",border:"none",padding:"0px",textAlign:"start"}},h.createElement(m.Z,{width:"100%",padding:"30px",display:"flex",gap:"20px",boxShadow:`0px 0px 10px 0px ${i.palette.grey[300]}`,borderRadius:"20px",sx:{transition:"0.3s",":hover":{cursor:"pointer",boxShadow:`0px 0px 10px 0px ${i.palette.grey[400]}`,color:"primary.main"}}},h.createElement(w.Z,null),h.createElement(p.Z,null,"add new ",t))))))},k=a(7697),C=a(2214),I=a(156);var z=e=>{let{type:t,currency:a,data:l,setIsChange:n,setStatus:r,changeAddress:i,changePayment:o}=e;const c=(0,g.I0)(),{0:s,1:d}=(0,h.useState)(0),p=e=>{"payment"===t?o(e):"delivery"===t&&i(e),d(0),n(!1)},x=e=>{c((0,I.Nq)({path:"payment"===t?"payments":"delivery"===t?"addresses":"",action:"ADD",data:e,setStatus:r,onSuccess:()=>p(e),onError:()=>d(0)}))},y=[h.createElement(S,{type:t,data:l,currency:a,setIsChange:n,setStage:d,handleSelect:p}),"payment"===t?h.createElement(k.Z,{onComplete:x,onCancel:()=>d(0),setStatus:r}):"delivery"===t?h.createElement(C.Z,{onComplete:x,onCancel:()=>d(0)}):h.createElement(h.Fragment,null)];return h.createElement(m.Z,{width:"100%",height:"100%",display:"flex",justifyContent:"center",pb:"20px"},y[s])},D=a(7404),$=a(2474);var j=e=>{let{type:t,user:a,errors:l,currency:n,content:r,setCheckoutDetails:i}=e;a=a.data;const o=(0,d.Z)(),{0:c,1:s}=(0,h.useState)(!1);return h.createElement(m.Z,{display:"flex",flexDirection:"column",flexBasis:300,flexGrow:1},h.createElement(b.Z,{width:"min(500px, 90%)",height:"600px",isEdit:c,handleClose:()=>s(!1)},h.createElement(z,{type:t,currency:n,setIsChange:s,changeAddress:e=>{i((t=>({...t,delivery:{...t.address,details:e},total:t.itemsTotal+e.location.deliveryFee.amount})))},changePayment:e=>{i((t=>({...t,payment:{...t.payment,details:e}})))},data:"payment"===t?a.payments.saved:"delivery"===t?a.addresses.saved:[]})),h.createElement(p.Z,{sx:{ml:"10px",display:"flex",gap:"10px",color:l[t]?o.palette.error.main:"text.secondary",alignItems:"flex-end"}},"delivery"===t?h.createElement(D.Z,null):"payment"===t?h.createElement($.Z,null):""," ",t.charAt(0).toUpperCase()+t.substring(1)),h.createElement(m.Z,{border:`1px solid ${l[t]?o.palette.error.main:o.palette.grey[400]}`,borderRadius:"25px",padding:"20px 40px",display:"flex"},h.createElement(m.Z,{width:"100%",display:"flex",flexDirection:"column",padding:"20px",borderRadius:"25px",boxShadow:`0px 0px 10px 0px ${o.palette.grey[300]}`},h.createElement(m.Z,{display:"flex",gap:"5px",alignItems:"center"},"payment"===t?h.createElement(Z.Z,{sx:{fontSize:"2rem"}}):"delivery"===t?h.createElement(v.Z,{sx:{fontSize:"2rem"}}):"",r?h.createElement(m.Z,{width:"100%",display:"flex",flexDirection:"column",gap:"5px"},h.createElement(m.Z,{width:"100%",display:"flex",justifyContent:"space-between"},h.createElement(p.Z,null,r.title),r.fee&&h.createElement(E.Z,{title:"fee",placement:"left"},h.createElement(p.Z,{color:"primary.main"},"+",n.symbol,r.fee.amount))),h.createElement(p.Z,{color:"text.secondary"},r.description)):h.createElement(p.Z,{padding:"13px 0px"},"None selected")),h.createElement(m.Z,{display:"flex",justifyContent:"flex-end"},h.createElement(y.Z,{variant:"contained",disableElevation:!0,onClick:()=>s(!0)},r?"change":"select")))))},R=a(2456),F=a(4160),W=a(7811),A=a(7416);var O=e=>{var t,a,l;let{currency:n,setIsConfirm:r,setStatus:i,checkoutDetails:o}=e;const c=(0,d.Z)(),s=(0,g.I0)(),{0:x,1:u}=(0,h.useState)([]);(0,h.useEffect)((()=>{(new W.Z).fetchProducts(Object.keys(o.items)).then((e=>{u(e)})).catch((e=>{s((0,A.c)({on:!0,type:"ERROR",message:`Error fetching order items: ${e}`}))}))}),[o]);return h.createElement(m.Z,{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"20px 0px"},h.createElement(p.Z,{fontWeight:"bold"},"Confirm checkout"),h.createElement(m.Z,{height:"100%",width:"100%",sx:{overflowY:"scroll","&::-webkit-scrollbar":{bgcolor:"transparent",width:"10px"},"&::-webkit-scrollbar-thumb":{borderRadius:"25px",bgcolor:c.palette.grey[300]},"&::-webkit-scrollbar-thumb:hover":{cursor:"pointer",bgcolor:c.palette.grey[400]}}},h.createElement(m.Z,{display:"flex",flexDirection:"column",gap:"20px",padding:"20px"},h.createElement(m.Z,{display:"flex",flexDirection:"column",width:"100%",gap:"10px"},x.map((e=>{const{total:t,...a}=o.items[e.id];return h.createElement(m.Z,{display:"flex",width:"100%",gap:"10px"},h.createElement(m.Z,{height:"40px",width:"50px",borderRadius:"10px",sx:{backgroundImage:`url(${e.images[0]})`,backgroundSize:"cover",backgroundPosition:"center"}}),h.createElement(m.Z,{display:"flex",flexDirection:"column",width:"100%"},h.createElement(p.Z,{fontSize:"0.8rem"},e.name),h.createElement(p.Z,{fontSize:"0.8rem",color:"text.secondary"},Object.keys(a).map((e=>`${e.charAt(0).toUpperCase()+e.substring(1)}: ${a[e]}`)).join(", "))),h.createElement(m.Z,{display:"flex",alignItems:"flex-start"},h.createElement(p.Z,{fontSize:"0.8rem",color:"primary.main"},n.symbol,o.items[e.id].total)))}))),h.createElement(m.Z,{display:"flex",gap:"10px",alignItems:"center"},h.createElement(p.Z,{fontSize:"0.9rem"},"Deliver to:"),h.createElement(p.Z,{fontSize:"0.9rem",color:"text.secondary"},null===(t=o.delivery.details)||void 0===t?void 0:t.name,","," ",null===(a=o.delivery.details)||void 0===a?void 0:a.city)),h.createElement(m.Z,{display:"flex",gap:"10px",alignItems:"center"},h.createElement(p.Z,{fontSize:"0.9rem"},"Pay using:"),h.createElement(p.Z,{fontSize:"0.9rem",color:"text.secondary"},null===(l=o.payment.details)||void 0===l?void 0:l.number)),h.createElement(m.Z,{display:"flex",gap:"10px",alignItems:"center"},h.createElement(p.Z,{fontWeight:"bold"},"Total:"),h.createElement(p.Z,null,n.symbol,o.total)))),h.createElement(m.Z,{width:"100%",display:"flex",justifyContent:"space-between"},h.createElement(y.Z,{variant:"outlined",onClick:()=>r(!1)},"back"),h.createElement(y.Z,{variant:"contained",disableElevation:!0,disabled:!Object.keys(o.items||{}).length,onClick:()=>{s((0,I.$Q)({data:o,setStatus:i,onSuccess:()=>{r(!1),(0,F.c4)("/")},onError:()=>{r(!1)}}))}},"confirm")))},H=a(6320),T=a(9421),L=a(4593);var M=e=>{var t;let{location:a}=e;const l=(0,s.Z)("(min-width:1000px)"),n=(0,d.Z)(),E=(0,g.I0)(),Z=(0,g.v9)((e=>e.currency)),v=(0,g.v9)((e=>e.user)),{0:w,1:S}=(0,h.useState)(!0),{0:k,1:C}=(0,h.useState)(!1),{0:I,1:z}=(0,h.useState)({}),{0:D,1:$}=(0,h.useState)({});(0,h.useEffect)((()=>{const e=new T.Z;z((t=>{var a,l;return e.getCheckoutErrors(t,{name:"items",value:D.items,message:"Add items to cart before checkout"},{name:"payment",value:null===(a=D.payment)||void 0===a?void 0:a.details,message:"Select a payment method to checkout"},{name:"delivery",value:null===(l=D.delivery)||void 0===l?void 0:l.details,message:"Select a delivery method to checkout"})}))}),[D]),(0,h.useEffect)((()=>{v.isFetching||(S(!1),v.isLoggedIn&&!Object.keys(D).length&&$({total:v.data.addresses.saved[v.data.addresses.recent]?v.data.cart.total+v.data.addresses.saved[v.data.addresses.recent].location.deliveryFee.amount:v.data.cart.total,itemsTotal:v.data.cart.total,items:v.data.cart.items,payment:{details:v.data.payments.saved[v.data.payments.recent],currency:Z.code},delivery:{details:v.data.addresses.saved[v.data.addresses.recent]}}))}),[v,D,Z.code]);const F=()=>{Object.keys(I).length?E((0,A.c)({on:!0,type:"ERROR",message:I[Object.keys(I)[0]]})):C(!0)};return h.createElement(h.Fragment,null,h.createElement(L.q,null,h.createElement("title",null,"Checkout | ",n.title),h.createElement("meta",{name:"description",content:"Checkout your items"})),h.createElement(m.Z,{minHeight:"100vh",display:"flex",justifyContent:"center"},!v.isFetching&&!v.isLoggedIn&&h.createElement(H.Z,{location:a,message:"login to check out",size:"large"}),(v.isLoggedIn||w)&&h.createElement(m.Z,{width:l?"80%":"90%",display:"flex",gap:"30px",alignItems:"flex-start",mb:"50px"},!w&&h.createElement(b.Z,{width:"min(600px, 90%)",height:"650px",isEdit:k,handleClose:()=>C(!1)},h.createElement(O,{currency:Z,setIsConfirm:C,checkoutDetails:D})),h.createElement(m.Z,{width:"100%",display:"flex",flexDirection:"column",gap:"20px"},!l&&h.createElement(m.Z,{mt:"20px",boxShadow:`0px 0px 10px 0px ${n.palette.grey[400]}`,borderRadius:"25px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",gap:"20px",padding:"20px 40px"},h.createElement(p.Z,{fontSize:"1.2rem",sx:{typography:"secondaryFont",fontWeight:"bold"}},"Summary"),w?h.createElement(R.Z,{count:3,width:"200px"}):h.createElement(m.Z,{display:"flex",flexDirection:"column",width:"100%"},h.createElement(m.Z,{display:"flex",justifyContent:"space-between"},h.createElement(p.Z,{fontSize:"0.8rem"},"Subtotal"),h.createElement(p.Z,{fontSize:"0.8rem"},Z.symbol," ",null===(t=v.data.cart)||void 0===t?void 0:t.total)),h.createElement(m.Z,{display:"flex",justifyContent:"space-between"},h.createElement(p.Z,{fontSize:"0.8rem"},"Delivery charges"),h.createElement(p.Z,{fontSize:"0.8rem"},D.delivery.details?`${Z.symbol} ${D.delivery.details.location.deliveryFee.amount}`:"$ 0"))),w?h.createElement(x.Z,{width:"200px",variant:"rounded"}):h.createElement(m.Z,{display:"flex",width:"100%",justifyContent:"space-between"},h.createElement(p.Z,{fontWeight:"bold"},"Total"),h.createElement(p.Z,{fontWeight:"bold"},Z.symbol," ",D.total)),h.createElement(m.Z,{position:"fixed",bottom:0,width:"100%",padding:"20px",boxShadow:`0px 0px 10px 0px ${n.palette.grey[400]}`,zIndex:1,bgcolor:"white",display:"flex",alignItems:"center",justifyContent:"space-between",borderRadius:"25px 25px 0px 0px"},w?h.createElement(x.Z,{variant:"rounded",width:"200px"}):h.createElement(p.Z,{padding:"10px",border:`1px solid ${n.palette.grey[400]}`,borderRadius:"10px",fontSize:"0.9rem"},"Total: ",Z.symbol," ",D.total),h.createElement(y.Z,{startIcon:h.createElement(r,null),variant:"contained",disableElevation:!0,disabled:w,onClick:F},"Confirm"))),h.createElement(m.Z,{display:"flex",flexDirection:"column"},h.createElement(p.Z,{sx:{ml:"10px",display:"flex",gap:"10px",color:w?"text.secondary":I.items?n.palette.error.main:"text.secondary",alignItems:"flex-end"}},h.createElement(i.Z,null)," Items"),h.createElement(m.Z,{overflow:"hidden",borderRadius:"25px"},h.createElement(m.Z,{border:`2px solid ${w?n.palette.grey[400]:I.items?n.palette.error.main:n.palette.grey[400]}`,borderRadius:"25px",height:"50vh",sx:{overflowY:"scroll","&::-webkit-scrollbar":{bgcolor:"transparent",width:"10px"},"&::-webkit-scrollbar-thumb":{borderRadius:"25px",bgcolor:n.palette.grey[300]},"&::-webkit-scrollbar-thumb:hover":{cursor:"pointer",bgcolor:n.palette.grey[400]}}},w?h.createElement(x.Z,{variant:"rounded",width:"100%",height:"50vh"}):Object.keys(D.items).length?h.createElement(m.Z,{width:"100%",display:"flex",flexDirection:"column",gap:"20px",padding:"20px"},Object.keys(D.items).map((e=>h.createElement(f.Z,{id:e,user:v,currency:Z,location:a,details:D.items[e],type:"checkout"})))):h.createElement(m.Z,{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"10px"},h.createElement(o.Z,{sx:{fontSize:"2rem"}}),h.createElement(p.Z,null,"Add items to your shopping cart to checkout"),h.createElement(u.Z,{href:"/cart"},h.createElement(y.Z,{variant:"contained",disableElevation:!0,startIcon:h.createElement(c.Z,null)},"back to cart")))))),w?h.createElement(R.Z,{count:2,flexDirection:"row",flexWrap:"wrap",height:"200px",style:{flexBasis:300,flexGrow:1}}):h.createElement(m.Z,{display:"flex",gap:"20px",flexWrap:"wrap"},h.createElement(j,{type:"payment",user:v,errors:I,currency:Z,setCheckoutDetails:$,content:D.payment.details&&{title:D.payment.details.type,description:D.payment.details.number}}),h.createElement(j,{type:"delivery",user:v,errors:I,currency:Z,setCheckoutDetails:$,content:D.delivery.details&&{title:`${D.delivery.details.name}`,description:`${D.delivery.details.city}, ${D.delivery.details.country}`,fee:D.delivery.details.location.deliveryFee}}))),l&&h.createElement(m.Z,{mt:"20px",boxShadow:`0px 0px 10px 0px ${n.palette.grey[400]}`,borderRadius:"25px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-evenly",gap:"20px",padding:"20px 40px",width:"300px"},h.createElement(p.Z,{fontSize:"1.2rem",sx:{typography:"secondaryFont",fontWeight:"bold"}},"Summary"),w?h.createElement(R.Z,{width:"200px",count:2}):h.createElement(m.Z,{display:"flex",flexDirection:"column",width:"100%"},h.createElement(m.Z,{display:"flex",justifyContent:"space-between"},h.createElement(p.Z,{fontSize:"0.8rem"},"Subtotal"),h.createElement(p.Z,{fontSize:"0.8rem"},Z.symbol," ",v.data.cart.total)),h.createElement(m.Z,{width:"100%",display:"flex",justifyContent:"space-between"},h.createElement(p.Z,{fontSize:"0.8rem"},"Delivery charges"),h.createElement(p.Z,{fontSize:"0.8rem"},D.delivery.details?`${Z.symbol} ${D.delivery.details.location.deliveryFee.amount}`:"$ 0"))),w?h.createElement(x.Z,{variant:"rounded",width:"200px"}):h.createElement(m.Z,{display:"flex",width:"100%",justifyContent:"space-between"},h.createElement(p.Z,{fontWeight:"bold"},"Total"),h.createElement(p.Z,{fontWeight:"bold"},Z.symbol," ",D.total)),h.createElement(y.Z,{startIcon:h.createElement(r,null),variant:"contained",disableElevation:!0,disabled:w,onClick:F},"Confirm")))))}}}]);
//# sourceMappingURL=component---src-pages-checkout-js-6f994616e88946b93ad0.js.map